#version 410 core

layout(triangles, equal_spacing, cw) in;

in vec3 worldSpacePosFromVS[];
in vec2 TexCoordsFromVS[];

out vec3 worldSpacePos;
out vec2 TexCoords;

void main() {
    float u = gl_TessCoord.x;
    float v = gl_TessCoord.y;
    float w = gl_TessCoord.z;

    vec4 p0 = gl_in[0].gl_Position;
    vec4 p1 = gl_in[1].gl_Position;
    vec4 p2 = gl_in[2].gl_Position;

    vec4 position = p0 * (1.0 - u - v) + p1 * u + p2 * v;

    gl_Position = position;

    worldSpacePos = worldSpacePosFromVS[0] * (1.0 - u - v) + worldSpacePosFromVS[1] * u + worldSpacePosFromVS[2] * v;
    TexCoords = TexCoordsFromVS[0] * (1.0 - u - v) + TexCoordsFromVS[1] * u + TexCoordsFromVS[2] * v;

}